# Minimal beets configuration (used inside container). The wrapper mounts your host config on /config.yaml
# Changed paths to produce:
#   /<AlbumArtist>/
#       <Artist> - (<Year>) <Album Title> [<Release Type>]/
#           (if multi-disc) Disc <N>/
#               <N>-<track_padded>. <Artist> - <Title>.<ext>
#           (if single-disc)
#               <track_padded>. <Artist> - <Title>.<ext>

directory: /data
library: /home/beets/library.db

import:
  move: yes        # move files into the library
  copy: no
  write: yes       # write metadata to files
  singletons: no
  resume: yes
  incremental: no
  quiet: yes
  autotag: yes
  # On duplicates: remove the old item so the new import overwrites
  duplicate_action: remove

# Keep cover art handling minimal
art_filename: cover

# Use inline plugin to define the extra variables
plugins:
  - inline
  - musicbrainz # Music indexer
  - fetchart    # Download cover for album, needs installation
  - embedart    # Embed cover in songs, needs installation

item_fields:
  disc_folder: f"Disc {disc:02d}" if disctotal > 1 else ""
  disc_and_track: f"{disc:02d}.{track:02d}" if disctotal > 1 else f"{track:02d}"

paths:
  # album directory: <AlbumArtist>/<AlbumArtist> - (<Year>) <Album Title> [<Release Type>]/
  # if multidisc: create "Disc <disc>/" subfolder and prefix filenames with "<disc>-<track_padded>"
  # if single-disc: place files directly and use "<track_padded>. <Artist> - <Title>"
  default: $albumartist/$albumartist - ($year) $album%if{$albumtype, [$albumtype]}/$disc_folder/$disc_and_track. $artist - $title
  singleton: Non-Album/$artist/$title
  comp: Compilations/$album%aunique{}/$track $title

permitted_extensions:
  - mp3
  - m4a
  - aac
  - mp4
  - flac
  - wav
  - ogg
